---
title: "Side Project Mental Health"
author: "Lindsey Fisher"
date: "10/8/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
## Dataset Explaination: BRFSSâ€™s objective is to collect uniform state-specific data on health risk behaviors, chronic diseases and conditions, access to health care, and use of preventive health services related to the leading causes of death and disability in the United States.
```{r_cleaning_script}
library(haven)
mh_2020 = haven::read_xpt("LLCP2020.XPT")
library(lubridate)
library(tidyverse)
##Make interview date a date value 
mh_2020$IDATE = as.Date(mh_2020$IDATE, "%d%m%Y")
##Change dispcode to binary: 1 means interview complete, 0 means interview partially complete 
mh_2020 = mh_2020 %>%
mutate(DISPCODE = case_when(DISPCODE == 1100 ~ 1,
      DISPCODE == 1200 ~ 0))

## Make a list of unimportant columns to drop
drop_cols = c("_PSU","SEQNO", "STATERE1","CELPHONE","COLGSEX","LANDSEX","RESPSLCT","CTELNUM1","CELLFON5","CSTATE1","LANDLINE")

##drop unimportant columns 
mh_2020 = mh_2020[,!(names(mh_2020)%in% drop_cols)]


##Change blank in correct telephone number to 0. 1= correct telephone number 0 = Missing Info.
mh_2020$CTELENM1[is.na(mh_2020$CTELENM1)] <- 0
##Change blank to 0.0 = Missing Info.
mh_2020$PVTRESD1[is.na(mh_2020$PVTRESD1)] <- 0
## 0 = missing, 1 private residence, 2 not private residence 
mh_2020$PVTRESD1 = as.factor(mh_2020$PVTRESD1)
## change NA to 0. 0 = not college housing, 1 college housing
mh_2020$COLGHOUS[is.na(mh_2020$COLGHOUS)] <- 0
##Change 18 or older to binary and missing: under 18=0,over 18 = 1, missing = 2
mh_2020$LADULT1[is.na(mh_2020$LADULT1)] <- 2
mh_2020$LADULT1[mh_2020$LADULT1 == 2] <- 0
##Factorize number of adults in household 
mh_2020$NUMADULT[mh_2020$NUMADULT >= 6] <- 6
mh_2020$NUMADULT= as.factor(mh_2020$NUMADULT)

##Factorize number of adult men in household
mh_2020$NUMMEN[mh_2020$NUMMEN >= 6] <- 6
##7 is missing 
mh_2020$NUMMEN[is.na(mh_2020$NUMMEN)] <- 7
mh_2020$NUMMEN= as.factor(mh_2020$NUMMEN)

##Factorize number of adult women in household
mh_2020$NUMWOMEN[mh_2020$NUMWOMEN >= 6] <- 6
##7 is missing 
mh_2020$NUMWOMEN[is.na(mh_2020$NUMWOMEN)] <- 7
mh_2020$NUMWOMEN= as.factor(mh_2020$NUMWOMEN)

##make safe time binary: yes, safe = 1, missing =0
mh_2020$SAFETIME[is.na(mh_2020$SAFETIME)] <- 0

##18 or older: cellphone. 0 = missing, 1 = adult
mh_2020$CADULT1[is.na(mh_2020$CADULT1)] <- 0

##Cellphone sex: 0 is female,1 is male, 2 is missing 
mh_2020$CELLSEX[mh_2020$CELLSEX == 2] = 0
mh_2020$CELLSEX[is.na(mh_2020$CELLSEX)] = 2
mh_2020$CELLSEX= as.factor(mh_2020$CELLSEX)

##private residence: 0 is no,1 is yes, 2 is missing 
mh_2020$PVTRESD3[mh_2020$PVTRESD3 == 2] = 0
mh_2020$PVTRESD3[is.na(mh_2020$PVTRESD3)] = 2
mh_2020$PVTRESD3= as.factor(mh_2020$PVTRESD3)

##college housing: 1=yes, 0 = missing 
mh_2020$CCLGHOUS[is.na(mh_2020$CCLGHOUS)] <- 0
mh_2020$CCLGHOUS=as.factor(mh_2020$CCLGHOUS)



##Factorize number of adult in household: cell phone question 
mh_2020$HHADULT[mh_2020$HHADULT >= 77] <- 0
##7 is missing 
mh_2020$HHADULT[is.na(mh_2020$HHADULT)] <- 0
mh_2020$HHADULT= as.factor(mh_2020$HHADULT)

##SEX: 0=female,1=male
mh_2020$SEXVAR[mh_2020$SEXVAR == 2]=0

##General Health Factor change refused or missing to 0
mh_2020$GENHLTH[mh_2020$GENHLTH == 9] = 0
mh_2020$GENHLTH[is.na(mh_2020$GENHLTH)] <- 0
mh_2020$GENHLTH= as.factor(mh_2020$GENHLTH)

##Number of days health not good: 0 = none, 1-30 number of days not good over last 30, 32=don't know, refused, or missing
mh_2020$PHYSHLTH[mh_2020$PHYSHLTH == 88] = 0
mh_2020$PHYSHLTH[is.na(mh_2020$GENHLTH)] <- 32
mh_2020$PHYSHLTH[mh_2020$PHYSHLTH ==77 | mh_2020$PHYSHLTH == 99] = 32
mh_2020$PHYSHLTH= as.factor(mh_2020$PHYSHLTH)

##Number of days mental health not good: 0 = none, 1-30 number of days not good over last 30, 32=don't know, refused, or missing

mh_2020$MENTHLTH[mh_2020$MENTHLTH == 88] = 0
mh_2020$MENTHLTH[is.na(mh_2020$MENTHLTH)] <- 32
mh_2020$MENTHLTH[mh_2020$MENTHLTH ==77 | mh_2020$MENTHLTH == 99] = 32
mh_2020$MENTHLTH= as.factor(mh_2020$MENTHLTH)

##Number of days mental health or physical health not good: 0 = none, 1-30 number of days not good over last 30, 32=don't know, refused, or missing

mh_2020$POORHLTH[mh_2020$POORHLTH == 88] = 0
mh_2020$POORHLTH[is.na(mh_2020$POORHLTH)] <- 32
mh_2020$POORHLTH[mh_2020$POORHLTH ==77 | mh_2020$POORHLTH == 99] = 32
mh_2020$POORHLTH= as.factor(mh_2020$POORHLTH)

##do you have healthcare. 0=no,1=yes,2=dont know, refuse, or missing

mh_2020$HLTHPLN1[mh_2020$HLTHPLN1 == 2] = 0 
mh_2020$HLTHPLN1[mh_2020$HLTHPLN1 > 2] = 2
mh_2020$HLTHPLN1[is.na(mh_2020$HLTHPLN1)] <- 2

##Personal doctor. 0 = no, 1= yes only one,2=more than one, 3 = dont know refuse or blank 
mh_2020$PERSDOC2[mh_2020$PERSDOC2 == 3] = 0 
mh_2020$PERSDOC2[mh_2020$PERSDOC2 > 3] = 3
mh_2020$PERSDOC2[is.na(mh_2020$PERSDOC2)] <- 3
mh_2020$PERSDOC2= as.factor(mh_2020$PERSDOC2)

## couldn't see doctor because of cost in last year. 0 = no, 1= yes, 2 =don't know refuse or blank 
mh_2020$MEDCOST[mh_2020$MEDCOST == 2] = 0 
mh_2020$MEDCOST[mh_2020$MEDCOST > 2] = 2
mh_2020$MEDCOST[is.na(mh_2020$MEDCOST)] <- 2
mh_2020$MEDCOST= as.factor(mh_2020$MEDCOST)

##length of time since last routine check up 
mh_2020$CHECKUP1[is.na(mh_2020$CHECKUP1)] <- 0
mh_2020$CHECKUP1=as.factor(mh_2020$CHECKUP1)

## exercise in last month. 0 = no, 1= yes only one,2=more than one, 3 = dont know refuse or blank 
mh_2020$EXERANY2[mh_2020$EXERANY2 == 2] = 0 
mh_2020$EXERANY2[mh_2020$EXERANY2 > 2] = 3
mh_2020$EXERANY2[is.na(mh_2020$EXERANY2)] <- 3
mh_2020$EXERANY2= as.factor(mh_2020$EXERANY2)

##sleep time. 0= don't know, refused missing. 1-24 is number of hours. 
mh_2020$SLEPTIM1[mh_2020$SLEPTIM1 > 24] = 0
mh_2020$SLEPTIM1[is.na(mh_2020$SLEPTIM1)] <- 0
mh_2020$SLEPTIM1= as.factor(mh_2020$SLEPTIM1)

##heart attack or mycardial infraction?0=no,1=yes,2=don't know,refused,missing
mh_2020$CVDINFR4[mh_2020$CVDINFR4 ==2] = 0
mh_2020$CVDINFR4[is.na(mh_2020$CVDINFR4)] <- 2

mh_2020$CVDINFR4[mh_2020$CVDINFR4 > 2] = 2

##angina or coronary heart disease
mh_2020$CVDCRHD4[mh_2020$CVDCRHD4 ==2] = 0
mh_2020$CVDCRHD4[is.na(mh_2020$CVDCRHD4)] <- 2

mh_2020$CVDCRHD4[mh_2020$CVDCRHD4 > 2] = 2

##stroke 
mh_2020$CVDSTRK3[mh_2020$CVDSTRK3 ==2] = 0
mh_2020$CVDSTRK3[is.na(mh_2020$CVDSTRK3)] <- 2

mh_2020$CVDSTRK3[mh_2020$CVDSTRK3 > 2] = 2

##Asthma ever?
mh_2020$ASTHMA3[mh_2020$ASTHMA3 ==2] = 0
mh_2020$ASTHMA3[is.na(mh_2020$ASTHMA3)] <- 2

mh_2020$ASTHMA3[mh_2020$ASTHMA3 > 2] = 2

##Asthma Now?
mh_2020$ASTHNOW[mh_2020$ASTHNOW ==2] = 0
mh_2020$ASTHNOW[is.na(mh_2020$ASTHNOW)] <- 2

mh_2020$ASTHNOW[mh_2020$ASTHNOW > 2] = 2

##skin cancer ever?
mh_2020$ASTHNOW[mh_2020$ASTHNOW ==2] = 0
mh_2020$ASTHNOW[is.na(mh_2020$ASTHNOW)] <- 2

mh_2020$ASTHNOW[mh_2020$ASTHNOW > 2] = 2












```

